<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>4474 Redesign</title>
    <link rel="stylesheet" href="game-menus.css">
  </head>
  <body class="tetris-body">
    
    <div class="header">
      <form action="game-select.html">
        <button class="back-button"></button>
      </form>
      <button class="settings-button" id="settings-open"></button>
      <h3 class="title">Tetris</h3>
    </div>

    <button class="game-info-button" id="instructions-open">Instructions</button>

    <div class="difficulty-radio-buttons">
      <label>
        <input type="radio" name="difficulty" value="easy" checked>
        <span class="checkmark">Easy</span>
      </label>
      <label>
        <input type="radio" name="difficulty" value="medium">
        <span class="checkmark">Medium</span>
      </label>
      <label>
        <input type="radio" name="difficulty" value="hard">
        <span class="checkmark">Hard</span>
      </label>
    </div>

    <form id="play-form" class="play-form" action="../Tetris/tetris.html">
      <button class="play-button">Play‚èµ</button>
    </form>
    <div class="instructions-modal" id="instructions-modal">
      <button class="instructions-speech" id="instructions-speech">üîä</button>
      <button class="instructions-close" id="instructions-close">X</button>
      <div class="instructions-text">
        <b id="instructions-desc">
          Move and rotate the falling geometric shapes to form complete rows at 
          the bottom of the game board. When the shapes reach the top, it's game over!<hr>
        </b>
        <div class="game-controls">
          <img class="controls-icon" src="../Media/a-key.png" width="40" height="40" alt="Arrow right">
          <p>OR</p>
          <img class="controls-icon" src="../Media/arrow-left.png" width="40" height="40" alt="Arrow left">
          Move tile left.
        </div>
        <div class="game-controls">
          <img class="controls-icon" src="../Media/d-key.png" width="40" height="40" alt="Arrow right">
          <p>OR</p>
          <img class="controls-icon" src="../Media/arrow-right.png" width="40" height="40" alt="Arrow right">
          Move tile right.
        </div>
        <div class="game-controls">
          <img class="controls-icon" src="../Media/s-key.png" width="40" height="40" alt="Arrow down">
          <p>OR</p>
          <img class="controls-icon" src="../Media/arrow-down.png" width="40" height="40" alt="Arrow down">
          Quick place tile.
        </div>
        <div class="game-controls">
          <img class="controls-icon" src="../Media/w-key.png" width="40" height="40" alt="Arrow down">
          <p>OR</p>
          <img class="controls-icon" src="../Media/arrow-up.png" width="40" height="40" alt="Arrow up">
          Rotate tile.
        </div>
        <div class="game-controls">
          <img class="controls-icon" src="../Media/space.png" width="40" height="40" alt="Space bar">
          Store a shape to use later.
        </div>
      </div>
    </div>



    <div class="settings-modal" id="settings-modal">
      <h1>Tetris Customization</h1>
      <button class="settings-close" id="settings-close">X</button>
      <div class="checkbox-container" style="display: flex; justify-content: space-between;">
        <div style="display:inline;">
          <input type="checkbox" id="useDefaults" name="useDefaults">
          <label for="useDefaults">Default</label>
        </div>
        <div id="reset" style="display:inline; margin-left: auto;">
          <input type="checkbox" id="resetDefaults" name="resetDefaults" checked>
          <label for="resetDefaults">Reset after Session</label>
        </div>
      </div>
      <div id="container">
        <form id="colorForm">        
          <h3>Edit Display:</h3><br>
          <div class="color-input-container" style="display: block;">
            <label for="background-color-input">Background Color:</label>
            <input type="color" id="background-color-input" name="background-color" value="#808080">
            <br><br><br>
          </div>
        
          <div class="color-input-container" style="display: block;">
            <label for="game-screen-color-input">Game Screen Color:</label>
            <input type="color" id="game-screen-color-input" name="game-screen-color" value="#000000">
            <br><br><br>
          </div>

          <h3>Edit Tetrominoes:</h3><br>

          <div class="block-colors">

            <div class="color-input-container" style="display: block;">
              <label for="I_Block">I &ensp;&ensp;&ensp; Block Color:</label>
              <input type="color" id="I_Block" name="I_Block" value="#00ffff"><br><br><br>
            </div>

            <div class="color-input-container" style="display: block;">
              <label for="O_Block">O &ensp;&ensp; Block Color:</label>
              <input type="color" id="O_Block" name="O_Block" value="#ffff00"><br><br><br>
            </div>
      
            <div class="color-input-container" style="display: block;">
              <label for="T_Block">T &ensp;&ensp; Block Color:</label>
              <input type="color" id="T_Block" name="T_Block" value="#800080"><br><br><br>
            </div>
      
            <div class="color-input-container" style="display: block;">
              <label for="S_Block">S &ensp;&ensp; Block Color:</label>
              <input type="color" id="S_Block" name="S_Block" value="#008000"><br><br><br>
            </div>
      
            <div class="color-input-container" style="display: block;">
              <label for="Z_Block">Z &ensp;&ensp; Block Color:</label>
              <input type="color" id="Z_Block" name="Z_Block" value="#ff0000"><br><br><br>
            </div>
      
            <div class="color-input-container" style="display: block;">
              <label for="J_Block">J &ensp;&ensp; Block Color:</label>
              <input type="color" id="J_Block" name="J_Block" value="#0000ff"><br><br><br>
            </div>
      
            <div class="color-input-container" style="display: block;">
              <label for="L_Block">L &ensp;&ensp; Block Color:</label>
              <input type="color" id="L_Block" name="L_Block" value="#ffa500"><br><br><br>
            </div>
          
          </div>
          <br>
    
          <input type="submit" id="submit" value="Update Colors" style="position: sticky; bottom: 25px; float: right;">
        </form>
      </div>
      <div id="notification">Changes have been applied</div>
      <style>
        /* CSS styles for the page */
        body {
          background-color: #f2f2f2;
          font-family: Arial, sans-serif;
        }
        #container {
          margin: 0 auto;
          width: 80%;
        }
        h1 {
          text-align: center;
        }
        #customize-form {
          background-color: #fff;
          border: 1px solid #ddd;
          border-radius: 5px;
          box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
          margin: 20px 0;
          padding: 20px;
        }
        label {
          display: block;
          margin-bottom: 10px;
          font-weight: bold;
        }
        select {
          margin-bottom: 20px;
        }
        .block-input {
          display: none;
        }
  
        .color-input-container {
          margin-right: 20px;
          vertical-align: middle;
        }
        
        .color-input-container label {
          display: inline-block;
          margin-right: 5px;
          vertical-align: middle;
        }
        #notification {
          display: none;
          position: fixed;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          padding: 10px;
          background-color: #4CAF50;
          color: white;
          z-index: 1000;
        }
      </style>
    </div>
    <div id="overlay"></div>
    <script src="instructions.js" type="module"></script>
    <script src="settings.js" type="module"></script>
    <script>
      const playForm = document.getElementById("play-form");
      const playButton = document.querySelector(".play-button");

      playButton.addEventListener("click", function(event) {
        const difficultyLevel = document.querySelector('input[name="difficulty"]:checked').value;

        if (difficultyLevel === "easy") {
          playForm.action = "../Tetris/tetris2.html";
        } else if (difficultyLevel === "hard") {
          playForm.action = "../Tetris/tetris3.html";
        }
      });

      function preventNavigation(event) {
        if (window.self !== window.top) { // Check if the current window is inside an iframe
          event.preventDefault(); // Prevent the link from navigating
        }
      }

      // Add a click event listener to the "" link
      document.querySelector('.play-button ').addEventListener('click', function(event) {
        console.log("shii")
        preventNavigation(event); // Prevent the link from navigating
        window.parent.postMessage('openGame', '*'); // Send a message to the parent window
      });

    </script>


  </body>
</html>